var Graticule=(function(){function p(s,r){this.sex_=r||false;this.set("container",document.createElement("DIV"));this.show();this.setMap(s)}p.prototype=new google.maps.OverlayView();p.prototype.addDiv=function(r){this.get("container").appendChild(r)},p.prototype.decToSex=function(t){var r=Math.floor(t);var s=((Math.abs(t)-r)*60).toFixed(2);if(s=="60.00"){r+=1;s="0.00"}return[r,":",s].join("")};p.prototype.onAdd=function(){var s=this;this.getPanes().mapPane.appendChild(this.get("container"));function t(){s.draw()}google.maps.event.addListener(this.getMap(),"idle",t);function r(){var u=m(s);var v=s.get("container").style;v.color=u;v.backgroundColor=u}r();google.maps.event.addListener(this.getMap(),"maptypeid_changed",r)};p.prototype.clear=function(){var r=this.get("container");while(r.hasChildNodes()){r.removeChild(r.firstChild)}};p.prototype.onRemove=function(){this.getPanes().mapPane.removeChild(container)};p.prototype.show=function(){this.get("container").style.visibility="visible"};p.prototype.hide=function(){this.get("container").style.visibility="hidden"};function m(s){var t=s.getMap().getMapTypeId();var r=google.maps.MapTypeId;if(t===r.HYBRID){return"#fff"}if(t===r.ROADMAP){return"#000"}if(t===r.SATELLITE){return"#fff"}if(t===r.TERRAIN){return"#000"}return"#fff"}function o(r){if(r<0.01){return 3}if(r<0.1){return 2}if(r<1){return 1}return 0}function e(r,s,u){for(var t=0;t<s.length;t+=1){if(r<=s[t]){return s[t]}}return u}var a=10;var k=[0.06,0.12,0.3,0.6,1.2,3,6,12,30,60,60*2,60*5,60*10,60*20,60*30,];var q=[0.01,0.02,0.05,0.1,0.2,0.5,1,3,6,12,30,60,60*2,60*5,60*10,60*20,60*30,];function h(r){if(r.sex_){return q}return k}function c(s,t,r){return s.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(t,r))}function j(s,r){return e(Math.ceil(s/a*6000)/100,r,60*45)/60}function l(r){return r.toString()+"px"}function d(r,w,v){var u=document.createElement("DIV");var t=u.style;t.position="absolute";t.left=l(r);t.top=l(w);t.color="inherit";t.width="3em";t.fontSize="0.6em";t.whiteSpace="nowrap";u.innerHTML=v;return u}function g(r,A,t,v){var z=document.createElement("DIV");var u=z.style;u.position="absolute";u.overflow="hidden";u.backgroundColor="inherit";u.opacity=0.3;var u=z.style;u.left=l(r);u.top=l(A);u.width=l(t);u.height=l(v);return z}var n=50000;function b(r){return g(r,-n,1,2*n)}function f(r){return g(-n,r,2*n,1)}function i(s,r,t){if(!t){t=Math.pow(10,-6)}if(Math.abs(s-r)<t){return true}return false}p.prototype.draw=function(){this.clear();if(this.get("container").style.visibility!="visible"){return}var s=this.getMap().getBounds();if(!s){return}var J=s.getSouthWest(),z=s.getNorthEast();var K=J.lng(),M=J.lat(),I=z.lng(),F=z.lat();if(K==I){K=-180;I=180}if(F==M){M=-90;F=90}var A=h(this);var E=j(F-M,A);var w=j(I>K?I-K:((180-K)+(I+180)),A);K=Math.floor(K/w)*w;M=Math.floor(M/E)*E;F=Math.ceil(F/E)*E;I=Math.ceil(I/w)*w;if(I==K){K+=w}if(I<K){I+=360}var L=K+2*w;var C=c(this,M+2*E,K).y+2;for(var B=K;B<I;B+=w){if(B>180){I-=360;B-=360}var H=c(this,M,B).x;this.addDiv(b(H));var v=i(B,L);this.addDiv(d(H+(v?17:3),C-(v?3:0),(this.sex_?this.decToSex(B):B.toFixed(o(w)))))}var u=M+2*E;var D=c(this,M,K+2*w).x+3;for(;M<=F;M+=E){var G=c(this,M,K).y;this.addDiv(f(G));this.addDiv(d(D,G+(i(M,u)?7:2),(this.sex_?this.decToSex(M):M.toFixed(o(E)))))}};return p})();