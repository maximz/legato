(function(a){a.fn.spinner=function(b){var c=a.extend({},a.fn.spinner.defaults,b);return this.each(function(){var e=0,n=0,m=0,g=0,f=0,i;var j=a(this);if(b=="remove"||b=="close"){var i=j.data("spinner");var d=j.data("opts");if(typeof i!="undefined"){i.remove();j.removeData("spinner").removeData("opts");if(d.hide){j.css("visibility","visible")}d.onFinish.call(this);return}}var k=j.offset();m=j.outerWidth();g=j.outerHeight();if(g>c.height){f=Math.round((g-c.height)/2)}else{if(g<c.height){f=0-Math.round((c.height-g)/2)}}n=k.top+f+"px";if(c.position=="right"){e=k.left+m+10+"px"}else{if(c.position=="left"){e=k.left-c.width-10+"px"}else{e=k.left+Math.round(0.5*m)-Math.round(0.5*c.width)+"px"}}c.onStart.call(this);if(c.hide){j.css("visibility","hidden")}i=a('<img src="'+c.img+'" style="position: absolute; left: '+e+"; top: "+n+"; width: "+c.width+"px; height: "+c.height+"px; z-index: "+c.zIndex+';" />').appendTo("body");j.data("spinner",i).data("opts",c)})};a.fn.spinner.defaults={position:"right",img:"/img/spinner.gif",height:16,width:16,zIndex:1001,hide:false,onStart:function(){},onFinish:function(){}}})(jQuery);